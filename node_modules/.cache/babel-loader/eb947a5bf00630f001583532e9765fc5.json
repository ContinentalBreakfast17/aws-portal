{"remainingRequest":"/home/h/tmp/node_modules/babel-loader/lib/index.js!/home/h/tmp/node_modules/eslint-loader/index.js??ref--13-0!/home/h/tmp/src/store/modules/auth.js","dependencies":[{"path":"/home/h/tmp/src/store/modules/auth.js","mtime":1556150585976},{"path":"/home/h/tmp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/h/tmp/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/h/tmp/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"/home/h/tmp/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport _typeof from \"/home/h/tmp/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport { Auth } from 'aws-amplify';\nvar state = {\n  authenticated: false,\n  user: null,\n  tokens: null\n};\nvar getters = {\n  getTokens: function getTokens(state) {\n    return state.tokens;\n  },\n  getUsername: function getUsername(state) {\n    if (state.user == null || _typeof(state.user.username) === undefined) {\n      return '';\n    }\n\n    return state.user.username;\n  },\n  getUserAttributes: function getUserAttributes(state) {\n    if (state.user == null || _typeof(state.user.attributes) === undefined) {\n      return '';\n    }\n\n    return state.user.attributes;\n  }\n};\nvar actions = {\n  registerLogin: function registerLogin(_ref, user) {\n    var commit = _ref.commit;\n    console.log(user);\n    commit('setAuthState', true);\n    commit('setTokens', user.signInUserSession);\n  },\n  registerLogout: function registerLogout(_ref2) {\n    var commit = _ref2.commit;\n    commit('setAuthState', false);\n  },\n  logout: function logout(_ref3) {\n    var commit = _ref3.commit;\n    Auth.signOut().then(function (data) {\n      commit('setAuthState', false);\n    }).catch(function (err) {\n      alert(err);\n    });\n  },\n  refreshUser: function refreshUser(_ref4) {\n    var commit = _ref4.commit;\n    return new _Promise(function (resolve, reject) {\n      Auth.currentAuthenticatedUser().then(function (user) {\n        resolve();\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  },\n  refreshToken: function refreshToken(_ref5) {\n    var commit = _ref5.commit;\n    return new _Promise(function (resolve, reject) {\n      Auth.currentSession().then(function (data) {\n        commit('setTokens', data);\n        commit('setAuthState', true);\n        resolve();\n      }).catch(function (err) {\n        commit('setAuthState', false);\n        reject(err);\n      });\n    });\n  }\n};\nvar mutations = {\n  setAuthState: function setAuthState(state, authenticated) {\n    state.authenticated = authenticated;\n  },\n  setTokens: function setTokens(state, tokens) {\n    state.tokens = tokens;\n  }\n};\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/home/h/tmp/src/store/modules/auth.js"],"names":["Auth","state","authenticated","user","tokens","getters","getTokens","getUsername","username","undefined","getUserAttributes","attributes","actions","registerLogin","commit","console","log","signInUserSession","registerLogout","logout","signOut","then","data","catch","err","alert","refreshUser","resolve","reject","currentAuthenticatedUser","refreshToken","currentSession","mutations","setAuthState","setTokens","namespaced"],"mappings":"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","sourcesContent":["import { Auth } from 'aws-amplify'\n\nconst state = {\n\tauthenticated: false,\n\tuser: null,\n\ttokens: null\n}\n\nconst getters = {\n\tgetTokens(state) {\n\t\treturn state.tokens\n\t},\n\n\tgetUsername(state) {\n\t\tif(state.user == null || typeof state.user.username === undefined) {\n\t\t\treturn ''\n\t\t}\n\t\treturn state.user.username\n\t},\n\n\tgetUserAttributes(state) {\n\t\tif(state.user == null || typeof state.user.attributes === undefined) {\n\t\t\treturn ''\n\t\t}\n\t\treturn state.user.attributes\n\t}\n}\n\nconst actions = {\n\tregisterLogin({commit}, user) {\n\t\tconsole.log(user)\n\t\tcommit('setAuthState', true)\n\t\tcommit('setTokens', user.signInUserSession)\n\t},\n\n\tregisterLogout({commit}) {\n\t\tcommit('setAuthState', false)\n\t},\n\n\tlogout({commit}) {\n\t\tAuth.signOut()\n\t\t.then(data => {\n\t\t\tcommit('setAuthState', false)\n\t\t}).catch(err => {\n\t\t\talert(err)\n\t\t})\n\t},\n\n\trefreshUser({commit}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tAuth.currentAuthenticatedUser()\n\t\t\t.then(user => {\n\t\t\t\tresolve()\n\t\t\t}).catch(err => {\n\t\t\t\treject(err)\n\t\t\t})\n\t\t})\n\t},\n\n\trefreshToken({commit}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tAuth.currentSession()\n\t\t\t.then(data => {\n\t\t\t\tcommit('setTokens', data)\n\t\t\t\tcommit('setAuthState', true)\n\t\t\t\tresolve()\n\t\t\t}).catch(err => {\n\t\t\t\tcommit('setAuthState', false)\n\t\t\t\treject(err)\n\t\t\t})\n\t\t})\n\t}\n}\n\nconst mutations = {\n\tsetAuthState(state, authenticated) {\n\t\tstate.authenticated = authenticated\n\t},\n\n\tsetTokens(state, tokens) {\n\t\tstate.tokens = tokens\n\t}\n}\n\nexport default {\n\tnamespaced: true,\n\tstate,\n\tgetters,\n\tactions,\n\tmutations\n}"]}]}